<% if @digital_object.dc_type == 'StillImage' %>

  <script>
    $(document).ready(function(){
      var tileSources = [Hyacinth.imageServerUrl + "/iiif/2/<%= @digital_object.pid %>/info.json"];

      var initialPage = 0;

      Hyacinth.openSeaDragonViewer = OpenSeadragon({
          id:            "zoom-content",
          prefixUrl:     "/openseadragon-images/",
          tileSources: tileSources,
          springStiffness:        10,
          showReferenceStrip:     (tileSources.length > 1),
          autoHideControls:       true,
          controlsFadeDelay: 100,
          controlsFadeLength: 500,
          maxZoomPixelRatio: 3,
          referenceStripSizeRatio: 0.15,
          showNavigator:  true,
          showRotationControl: true,
          initialPage: initialPage,
          //zoomInButton:   "zoom-in-control",
          //zoomOutButton:  "zoom-out-control",
          //homeButton:     "zoom-home-control",
          //fullPageButton: "zoom-full-control",
          //nextButton:     "zoom-next-control",
          //previousButton: "zoom-prev-control",
          showSequenceControl:  (tileSources.length > 1)
        });

      Hyacinth.openSeaDragonViewer.addHandler('open',function(){
        $('#zoom-content .loading-message').remove();
      },null);

      //Resize immediately
      $('#zoom-content').height($(window).height()).width($(window).width());
      //Resize on window resize
      $(window).on('resize', function(){
        $('#zoom-content').height($(window).height()).width($(window).width());
      });
    });
  </script>
  <div id="zoom-content" style="width: 800px; height: 600px;">
    <div class="loading-message">Loading...</div>
  </div>
<% elsif ['Sound','MovingImage'].include? @digital_object.dc_type %>
  <% media_url = @digital_object.player_url(request.remote_ip) %>
  <% media_mime_type = @digital_object.player_mime_type %>
  <div id="media-content" style="width: 800px; height: 600px;">
    <video id="videojs-player" class="video-js" preload="auto">
      <source src="<%= media_url %>" />
    </video>
    <script>
      const optionsForVideo = {
            autoplay: false,
            controls: true,
            responsive: true,
            fluid: true,
            playbackRates: [0.5, 1, 1.5, 2],
            sources: [{
              src: '<%= media_url.html_safe %>',
              type: '<%= media_mime_type %>',
          }],
        };

        videojs('videojs-player', optionsForVideo, () => {
            //console.log("player is ready");
        });
    </script>
  </div>
<% else %>
  Not currently handling Assets of type: <%= @digital_object.dc_type %>
<% end %>
